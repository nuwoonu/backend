backend

java
python
node.js
c#

DB서버와 연동.
front 상호작용

front : DB 연동 불가

JSP / Servlet (웹에서 동작하는 자바) =>  스프링 프레임워크

스프링 프레임워크 : 기본 개념
스프링 부트 : 스프링 프레임워크를 사용하기 쉽게 간략화 시킨것.

프로젝트 관리 도구
- 라이브러리 관리, 컴파일, 빌드(패키지 작성 :war jar) 배포

- gradle : groovy 작성, 빠름 , build.gradle
- maven : XML 작성 ,느림 , 에전부터 사용하던 방식 , pom.xml

웹서버
 https://spring.io/projects/spring-boot
 - http:// or https:// 들어오는 요청 처리 해주는 서버
 - apache 웹서버, NginX
 
 
 
 WAS(Web Application Server)
 - java 코드로 작성 된 페이지를 해석해주는 서버 필요.
 
 웹서버 + WAS 조합 ====> 서버 기능을한다.
=> Tomcat (free)
=> spring boot에는 tomcat이 내장되어 있음.
=> http://localhost:8080/

에러
caused by ~~~

500 에러 == 서버쪽 에러

Template Resolvers 에러는 =>
1) TemplateInputException ==> html 없어서 오류.


404 에러
1)컨트롤러 경로 확인



스프링 프레임워크 화면단
JSP (*.jsp) : html 코드 + 자바코드 같이 사용가능. [Java Server Pages] (기본값) [기본으로 지원했음]
템플릿 사용가능하지만...
react 사용 가능하지만...
스프링 부트 화면단 (선택사항)
1.템플릿 (기본값) : thymeleaf,freemaker,mustache ...
2.react
3.JSP (boot는 기본적으로 JSP 지원안함) => 따로 설정 필요.

***********************************
src / main / demo / controller
src / main / templates ==> 안에 .html파일 만들어야함.
***********************************

//GetMapping ==> get요청으로 들어올 때 의미.
    @GetMapping("/home") //URL 이름 경로

--------------------------------------------------
스프링 부트 동작방식
1) DispatcherServlet : 웹 요청을 처음에 받음.
2) 요청 경로 파악 후 HandlerMapping, HandlerAdapter 객체 사용
3) 적적한 컨트롤러 요청 넘김
4) 컨트롤러 작업 수행 후 결과를 템플릿과 함께 리턴.
5) 클라이언트 화면에 내용 보여지게 됨.

결국 사용자는 컨트롤러와 템플릿을 잘 작성하면 된다!

템플릿 규칙
컨트롤러가 void 일 때 => 요청할때 사용 했던 경로에서 (@GetMapping) 마지막에 존재하는 경로명.html

void localhost:8080/content/home ==> content/home.html
void localhost:8080/board/add : board/add.html

String : return 값에 html을 붙여서 찾기

resource/ templates/ result.html

템플릿 파일명은 경로랑 다르게 사용할때.
return "result";

같은 곳을 가리켜줄 때 String을 사용해서 return 으로 반환한다.
localhost:8080/board/add ==> /content/result.html
localhost:8080/add ==> /content/result.html

---------------------------------------------------
@Controller : 해당 클래스가 컨트롤러 역할임을 명시
 -프레임워크가 해당 클래스를 관리한다는 의미도 있다. (new를 해서 객체생성하여 갖고있겠다는 의미.)


에러 동일한 경로 작성 시 (**** .java 파일에서 경로 중복 안됨! ****)
Caused by: org.springframework.beans.factory.BeanCreationException at AbstractAutowireCapableBeanFactory.java:1826
Caused by: java.lang.IllegalStateException at AbstractHandlerMethodMapping.java:676


<form action="" method="post"> 포스트 폼을 사용하여 포스트 매핑할 때 , 겟매핑도 있어야함.
<input type="text" name="num1" id="num1" />
      <button type="submit">전송</button>


form action 안쓰면 경로 그대로 나옴.

name = "num1"을 그대로 

@PostMapping("/calc")

    public void postCalc(int num1) {
        log.info("calc post {}",num1); // => {} 중괄호의 의미는 변수 들어가는 공간. 
    }


빌드 하고 인식 안될때 터미널에서
./gradlew clean bootRun 명령어 사용.


템플릿 : html, java 코드 사용가능해야함
=> thymeleaf
    
    <p>[[${info?.addr}]]</p> ==> 자바코드  info? ?의 의미는 없을 수도 있다 처음에 폼에서 입력받아야하므로 null값을 갖고있음.
    <p>[${info.addr}]</p>
    <p th:value="${info.addr}"> </p>

JSP/Servlet ==> Spring framework



동작 흐름 
localhost://8080/경로 => 컨트롤러 찾기 => 
1. localhost://8080/ 주소 요청시 => controller 찾기 
2. 컨트롤러 코드가 실행 후 최종적으로 템플릿을 리턴한다.
3. templates이 void면 @getMapping("/경로") 가서 html 화면을 띄워준다.


LoginController
Get 컨트롤러
Post 컨트롤러
/member/login.html

templates/member/login.html
아이디/비밀번호

인덱스에 링크걸것.


주요 어노테이션
@Controller
@RequestParam


예): localhost://8080/member/login?no=1&name=홍길동

@RequestParam의 의미는 http 요청의 파라미터를 컨트롤러 메서드의 매개변수로 바인딩()

@GetMapping("path")
    public String getMethodName(@RequestParam String param) {
        return new String();
    } 

  public String getMethodName(int num1, int num2) {} 이름만 똑같이 한다면 유추해서 @RequestParam 가능하도록해준다.
  public String getMethodName(@RequestParam 타입int,String 변수명)
  public String getMethodName(@RequestParam(required = true or false, defaultValue="0") 타입int,String 변수명) required = false면 값이 들어오지 않아도 실행된다. defaultValue="0" ==> 안들어왔을때 기본값을 지정하는것.
  
  
  public String getCalc(@RequestParam int num1, @RequestParam int num2) {}
  public String getCalc(@RequestParam("num1") int num1, @RequestParam int num2) {}

  아래의 코드가 Parameter(매개변수)로 값이 안들어오는 경우 400에러 발생을 방지하기 위해 사용.
  public void postCalc(@RequestParam(required =false, defaultValue = "0") int num1, @RequestParam(required = false, defaultValue = "0") int num2) {}


  아래의 코드는 옛날 맵핑 방식
  @RequestMapping(path="/test", method=RequestMethod.GET) == @GetMapping("/test")
  현재는 간단하게 
  @GetMapping("/test") 를 사용한다.


  <form action="/add" method="get"> form태그에 액션 부분에 경로를 주어지면 그 경로로 보내준다.

  localhost:8080/exam3 로 시작
  form 의 action으로 넘어가서 /add 경로로 인계
  localhost:8080/add?num1=9&op=%2B&num2=8&result=
  
  데이터 입력후 그대로 출력 값 띄우려면
  

  @GetMapping("/add")
  public String getAdd(@RequestParam int num1, @RequestParam String op , @RequestParam int num2, Model model) {}
  Model org.Springframework.ui 선택  
  
  log.info("result : "+ result);
  아래에 추가.
  model.addAttribute("num1", num1);

  Model이라는 객체는 컨트롤러가 뷰(사용자가 보는 화면)에 데이터를 전달하기 위해 사용하는 인터페이스 
  model.addAttribute(key,value) => 키값은 중복안되게 해야한다.

  지정후 html 파일에서 input 태그안에 th:value = "${키값}" 넣어주면 된다.

  @ModelAttribute("키") == Model 모델이랑 하는일이 똑같다.

아래의 코드를 어노테이션을 이용하여 사용변경.
<li>아이디 : [[${loginDTO?.id}]]</li>
<li>비밀번호 : [[${loginDTO?.password}]]</li>


public void postlogin(@ModelAttribute("login") LoginDTO login) // *****html에서 클래스명의 첫시작을 소문자로*****

    <ul>
      <li>아이디 : [[${login?.id}]]</li>
      <!--**************클래스명에서 첫시작 문자를 소문자로 가져온다.************-->
      <li>비밀번호 : [[${login?.password}]]</li>
    </ul>



Model : 뷰로 데이터 전달
@ModelAttribute("키") : 뷰로 데이터 전달 + (데이터 바인딩)

RedirectAttributes : 리다이렉트가 발생한 후 데이터를 일회성으로 전달하기 위해 사용하는 인터페이스
1. 주소줄 이용: rttr.addAttribute("bno",10);
2. HTTP session 을 임시로 사용 : rttr.addFlashAttribute("money",1000);


1. 컨트롤 (경로)
2. 페이지 보여주기 (갭메핑)
3. 입력값만 가져오기 (포스트 메핑)

void 일때는 =>
String => return ;=>

가져올때 어떻게?
DTO , 개별변수 